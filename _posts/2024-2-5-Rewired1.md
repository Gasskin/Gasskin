---
title: "Rewired 简单记录"
tags: 动画  
---

# InputManager

数据存储中心，本身不带有复杂逻辑

创建一个Prefab然后把脚本挂上去，运行时生成一个使用，全局唯一

# Player

输入控制的中心，你可能会有很多按键布局，比如战斗按键布局，UI按键布局，每种布局可以当做是一个Controller，而一个玩家可以拥有任意数量的Controller，并按照一定的规则启用

![image-20240206000244408](https://cdn.jsdelivr.net/gh/Gasskin/CloudImg/img202402060002507.png)

如图，一个玩家拥有一个Controller，Controller内包含了很多控制元素，只是最基本的按键信息，比如A

同时，玩家还有一个ControllerMap，也就是一个Controller对应的功能映射，每个映射成为一个Action，比如按键A对应开火

通过这几个组件，就成功把Player、按键A、Fire，三者关联起来

## 创建Player

Player是InputManager运行时自动创建的，所以Player信息必须提前配置好

![image-20240206001000301](https://cdn.jsdelivr.net/gh/Gasskin/CloudImg/img202402060010371.png)

如图，你可以配置每一个Player对应的Map有哪些

获取也很简单：

```c#
var player = ReInput.players.GetPlayer(playerId);
```

## 获取输入

如果要获取对应的输入，有很多方式

1. 通过GetXXX

   ```c#
   var value = player.GetAxis("Move Horizontal")
   ```

2. 注册事件

   ```c#
    player.AddInputEventDelegate(OnMoveHorizontal, UpdateLoopType.Update, InputActionEventType.AxisActiveOrJustInactive, "Move Horizontal");
   ```

3. 内部方法，不推荐

   ```c#
   for(int i = 0; i < player.joystickCount; i++) { ... }
   ```

## Player与Controller Map

Rewired是以Player为核心的，所以CtrlMap存在Player中，而非Controller中，Ctrl只定义按键元素，至于按键对应的具体Action，则由玩家决定

# Actions

一个Action对应一个事件，比如开火

你可以直接通过事件处理输入，比如：

```c#
 var flag = player.GetButtonDown("Fire");
```













